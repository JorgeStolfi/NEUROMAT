# Last edited on 2023-11-29 15:01:27 by stolfi

PROG := nmeeg_make_test_clip.gawk
PROGDIR := ..

include ${STOLFIHOME}/programs/c/GENERIC-PROGS-TEST.make

# Format: {TAG}:{IN_NAME}:{SKIP}:{NT}:{VMAX}:{CHANS}

FEW_CHANS_TESTS := \
  gh_s13_r101_s:gh_s13_r101:250:3000:500:C012.C014.C073.C121.FX

MARKER_TESTS := \
  FTST:gh_s13_r101_r:250:3000:500:C001.FX.ST \

SINGLE_CHAN_TESTS_FN := \
  fn_C001:fn_v01_rall:7800:3375:200:C001.RTHM.BEAT.STIM \
  fn_C002:fn_v01_rall:7800:3375:200:C002.RTHM.BEAT.STIM \
  fn_C003:fn_v01_rall:7800:3375:200:C003.RTHM.BEAT.STIM \
  fn_C004:fn_v01_rall:7800:3375:200:C004.RTHM.BEAT.STIM \
  fn_C005:fn_v01_rall:7800:3375:200:C005.RTHM.BEAT.STIM \
  fn_C006:fn_v01_rall:7800:3375:200:C006.RTHM.BEAT.STIM \
  fn_C007:fn_v01_rall:7800:3375:200:C007.RTHM.BEAT.STIM \
  fn_C008:fn_v01_rall:7800:3375:200:C008.RTHM.BEAT.STIM \
  fn_C009:fn_v01_rall:7800:3375:200:C009.RTHM.BEAT.STIM \
  fn_C010:fn_v01_rall:7800:3375:200:C010.RTHM.BEAT.STIM \
  fn_C011:fn_v01_rall:7800:3375:200:C011.RTHM.BEAT.STIM \
  fn_C012:fn_v01_rall:7800:3375:200:C012.RTHM.BEAT.STIM \
  fn_C013:fn_v01_rall:7800:3375:200:C013.RTHM.BEAT.STIM \
  fn_C014:fn_v01_rall:7800:3375:200:C014.RTHM.BEAT.STIM \
  fn_C015:fn_v01_rall:7800:3375:200:C015.RTHM.BEAT.STIM \
  fn_C016:fn_v01_rall:7800:3375:200:C016.RTHM.BEAT.STIM \
  fn_C017:fn_v01_rall:7800:3375:200:C017.RTHM.BEAT.STIM \
  fn_C018:fn_v01_rall:7800:3375:200:C018.RTHM.BEAT.STIM \
  fn_C019:fn_v01_rall:7800:3375:200:C019.RTHM.BEAT.STIM \
  fn_C020:fn_v01_rall:7800:3375:200:C020.RTHM.BEAT.STIM \
  fn_C021:fn_v01_rall:7800:3375:200:C021.RTHM.BEAT.STIM \
  fn_C022:fn_v01_rall:7800:3375:200:C022.RTHM.BEAT.STIM \
  fn_C023:fn_v01_rall:7800:3375:200:C023.RTHM.BEAT.STIM \
  fn_C024:fn_v01_rall:7800:3375:200:C024.RTHM.BEAT.STIM \
  fn_C025:fn_v01_rall:7800:3375:200:C025.RTHM.BEAT.STIM \
  fn_C026:fn_v01_rall:7800:3375:200:C026.RTHM.BEAT.STIM \
  fn_C027:fn_v01_rall:7800:3375:200:C027.RTHM.BEAT.STIM \
  fn_C028:fn_v01_rall:7800:3375:200:C028.RTHM.BEAT.STIM \
  fn_C029:fn_v01_rall:7800:3375:200:C029.RTHM.BEAT.STIM \
  fn_C030:fn_v01_rall:7800:3375:200:C030.RTHM.BEAT.STIM \
  fn_C031:fn_v01_rall:7800:3375:200:C031.RTHM.BEAT.STIM \
  fn_C032:fn_v01_rall:7800:3375:200:C032.RTHM.BEAT.STIM \
  fn_C033:fn_v01_rall:7800:3375:200:C033.RTHM.BEAT.STIM \
  fn_C034:fn_v01_rall:7800:3375:200:C034.RTHM.BEAT.STIM \
  fn_C035:fn_v01_rall:7800:3375:200:C035.RTHM.BEAT.STIM \
  fn_C036:fn_v01_rall:7800:3375:200:C036.RTHM.BEAT.STIM \
  fn_C037:fn_v01_rall:7800:3375:200:C037.RTHM.BEAT.STIM \
  fn_C038:fn_v01_rall:7800:3375:200:C038.RTHM.BEAT.STIM \
  fn_C039:fn_v01_rall:7800:3375:200:C039.RTHM.BEAT.STIM \
  fn_C040:fn_v01_rall:7800:3375:200:C040.RTHM.BEAT.STIM \
  fn_C041:fn_v01_rall:7800:3375:200:C041.RTHM.BEAT.STIM \
  fn_C042:fn_v01_rall:7800:3375:200:C042.RTHM.BEAT.STIM \
  fn_C043:fn_v01_rall:7800:3375:200:C043.RTHM.BEAT.STIM \
  fn_C044:fn_v01_rall:7800:3375:200:C044.RTHM.BEAT.STIM \
  fn_C045:fn_v01_rall:7800:3375:200:C045.RTHM.BEAT.STIM \
  fn_C046:fn_v01_rall:7800:3375:200:C046.RTHM.BEAT.STIM \
  fn_C047:fn_v01_rall:7800:3375:200:C047.RTHM.BEAT.STIM \
  fn_C048:fn_v01_rall:7800:3375:200:C048.RTHM.BEAT.STIM \
  fn_C049:fn_v01_rall:7800:3375:200:C049.RTHM.BEAT.STIM \
  fn_C050:fn_v01_rall:7800:3375:200:C050.RTHM.BEAT.STIM \
  fn_C051:fn_v01_rall:7800:3375:200:C051.RTHM.BEAT.STIM \
  fn_C052:fn_v01_rall:7800:3375:200:C052.RTHM.BEAT.STIM \
  fn_C053:fn_v01_rall:7800:3375:200:C053.RTHM.BEAT.STIM \
  fn_C054:fn_v01_rall:7800:3375:200:C054.RTHM.BEAT.STIM \
  fn_C055:fn_v01_rall:7800:3375:200:C055.RTHM.BEAT.STIM \
  fn_C056:fn_v01_rall:7800:3375:200:C056.RTHM.BEAT.STIM \
  fn_C057:fn_v01_rall:7800:3375:200:C057.RTHM.BEAT.STIM \
  fn_C058:fn_v01_rall:7800:3375:200:C058.RTHM.BEAT.STIM \
  fn_C059:fn_v01_rall:7800:3375:200:C059.RTHM.BEAT.STIM \
  fn_C060:fn_v01_rall:7800:3375:200:C060.RTHM.BEAT.STIM \
  fn_C061:fn_v01_rall:7800:3375:200:C061.RTHM.BEAT.STIM \
  fn_C062:fn_v01_rall:7800:3375:200:C062.RTHM.BEAT.STIM \
  fn_C063:fn_v01_rall:7800:3375:200:C063.RTHM.BEAT.STIM \
  fn_C064:fn_v01_rall:7800:3375:200:C064.RTHM.BEAT.STIM \
  fn_C065:fn_v01_rall:7800:3375:200:C065.RTHM.BEAT.STIM \
  fn_C066:fn_v01_rall:7800:3375:200:C066.RTHM.BEAT.STIM \
  fn_C067:fn_v01_rall:7800:3375:200:C067.RTHM.BEAT.STIM \
  fn_C068:fn_v01_rall:7800:3375:200:C068.RTHM.BEAT.STIM \
  fn_C069:fn_v01_rall:7800:3375:200:C069.RTHM.BEAT.STIM \
  fn_C070:fn_v01_rall:7800:3375:200:C070.RTHM.BEAT.STIM \
  fn_C071:fn_v01_rall:7800:3375:200:C071.RTHM.BEAT.STIM \
  fn_C072:fn_v01_rall:7800:3375:200:C072.RTHM.BEAT.STIM \
  fn_C073:fn_v01_rall:7800:3375:200:C073.RTHM.BEAT.STIM \
  fn_C074:fn_v01_rall:7800:3375:200:C074.RTHM.BEAT.STIM \
  fn_C075:fn_v01_rall:7800:3375:200:C075.RTHM.BEAT.STIM \
  fn_C076:fn_v01_rall:7800:3375:200:C076.RTHM.BEAT.STIM \
  fn_C077:fn_v01_rall:7800:3375:200:C077.RTHM.BEAT.STIM \
  fn_C078:fn_v01_rall:7800:3375:200:C078.RTHM.BEAT.STIM \
  fn_C079:fn_v01_rall:7800:3375:200:C079.RTHM.BEAT.STIM \
  fn_C080:fn_v01_rall:7800:3375:200:C080.RTHM.BEAT.STIM \
  fn_C081:fn_v01_rall:7800:3375:200:C081.RTHM.BEAT.STIM \
  fn_C082:fn_v01_rall:7800:3375:200:C082.RTHM.BEAT.STIM \
  fn_C083:fn_v01_rall:7800:3375:200:C083.RTHM.BEAT.STIM \
  fn_C084:fn_v01_rall:7800:3375:200:C084.RTHM.BEAT.STIM \
  fn_C085:fn_v01_rall:7800:3375:200:C085.RTHM.BEAT.STIM \
  fn_C086:fn_v01_rall:7800:3375:200:C086.RTHM.BEAT.STIM \
  fn_C087:fn_v01_rall:7800:3375:200:C087.RTHM.BEAT.STIM \
  fn_C088:fn_v01_rall:7800:3375:200:C088.RTHM.BEAT.STIM \
  fn_C089:fn_v01_rall:7800:3375:200:C089.RTHM.BEAT.STIM \
  fn_C090:fn_v01_rall:7800:3375:200:C090.RTHM.BEAT.STIM \
  fn_C091:fn_v01_rall:7800:3375:200:C091.RTHM.BEAT.STIM \
  fn_C092:fn_v01_rall:7800:3375:200:C092.RTHM.BEAT.STIM \
  fn_C093:fn_v01_rall:7800:3375:200:C093.RTHM.BEAT.STIM \
  fn_C094:fn_v01_rall:7800:3375:200:C094.RTHM.BEAT.STIM \
  fn_C095:fn_v01_rall:7800:3375:200:C095.RTHM.BEAT.STIM \
  fn_C096:fn_v01_rall:7800:3375:200:C096.RTHM.BEAT.STIM \
  fn_C097:fn_v01_rall:7800:3375:200:C097.RTHM.BEAT.STIM \
  fn_C098:fn_v01_rall:7800:3375:200:C098.RTHM.BEAT.STIM \
  fn_C099:fn_v01_rall:7800:3375:200:C099.RTHM.BEAT.STIM \
  fn_C100:fn_v01_rall:7800:3375:200:C100.RTHM.BEAT.STIM \
  fn_C101:fn_v01_rall:7800:3375:200:C101.RTHM.BEAT.STIM \
  fn_C102:fn_v01_rall:7800:3375:200:C102.RTHM.BEAT.STIM \
  fn_C103:fn_v01_rall:7800:3375:200:C103.RTHM.BEAT.STIM \
  fn_C104:fn_v01_rall:7800:3375:200:C104.RTHM.BEAT.STIM \
  fn_C105:fn_v01_rall:7800:3375:200:C105.RTHM.BEAT.STIM \
  fn_C106:fn_v01_rall:7800:3375:200:C106.RTHM.BEAT.STIM \
  fn_C107:fn_v01_rall:7800:3375:200:C107.RTHM.BEAT.STIM \
  fn_C108:fn_v01_rall:7800:3375:200:C108.RTHM.BEAT.STIM \
  fn_C109:fn_v01_rall:7800:3375:200:C109.RTHM.BEAT.STIM \
  fn_C110:fn_v01_rall:7800:3375:200:C110.RTHM.BEAT.STIM \
  fn_C111:fn_v01_rall:7800:3375:200:C111.RTHM.BEAT.STIM \
  fn_C112:fn_v01_rall:7800:3375:200:C112.RTHM.BEAT.STIM \
  fn_C113:fn_v01_rall:7800:3375:200:C113.RTHM.BEAT.STIM \
  fn_C114:fn_v01_rall:7800:3375:200:C114.RTHM.BEAT.STIM \
  fn_C115:fn_v01_rall:7800:3375:200:C115.RTHM.BEAT.STIM \
  fn_C116:fn_v01_rall:7800:3375:200:C116.RTHM.BEAT.STIM \
  fn_C117:fn_v01_rall:7800:3375:200:C117.RTHM.BEAT.STIM \
  fn_C118:fn_v01_rall:7800:3375:200:C118.RTHM.BEAT.STIM \
  fn_C119:fn_v01_rall:7800:3375:200:C119.RTHM.BEAT.STIM \
  fn_C120:fn_v01_rall:7800:3375:200:C120.RTHM.BEAT.STIM \
  fn_C121:fn_v01_rall:7800:3375:200:C121.RTHM.BEAT.STIM \
  fn_C122:fn_v01_rall:7800:3375:200:C122.RTHM.BEAT.STIM \
  fn_C123:fn_v01_rall:7800:3375:200:C123.RTHM.BEAT.STIM \
  fn_C124:fn_v01_rall:7800:3375:200:C124.RTHM.BEAT.STIM \
  fn_C125:fn_v01_rall:7800:3375:200:C125.RTHM.BEAT.STIM \
  fn_C126:fn_v01_rall:7800:3375:200:C126.RTHM.BEAT.STIM \
  fn_C127:fn_v01_rall:7800:3375:200:C127.RTHM.BEAT.STIM \
  fn_C128:fn_v01_rall:7800:3375:200:C128.RTHM.BEAT.STIM

SINGLE_CHAN_TESTS_GH := \
  gh_C001:gh_s13_r101:250:3000:500:C001 \
  gh_C002:gh_s13_r101:250:3000:500:C002 \
  gh_C003:gh_s13_r101:250:3000:500:C003 \
  gh_C004:gh_s13_r101:250:3000:500:C004 \
  gh_C005:gh_s13_r101:250:3000:500:C005 \
  gh_C006:gh_s13_r101:250:3000:500:C006 \
  gh_C007:gh_s13_r101:250:3000:500:C007 \
  gh_C008:gh_s13_r101:250:3000:500:C008 \
  gh_C009:gh_s13_r101:250:3000:500:C009 \
  gh_C010:gh_s13_r101:250:3000:500:C010 \
  gh_C011:gh_s13_r101:250:3000:500:C011 \
  gh_C012:gh_s13_r101:250:3000:500:C012 \
  gh_C013:gh_s13_r101:250:3000:500:C013 \
  gh_C014:gh_s13_r101:250:3000:500:C014 \
  gh_C015:gh_s13_r101:250:3000:500:C015 \
  gh_C016:gh_s13_r101:250:3000:500:C016 \
  gh_C017:gh_s13_r101:250:3000:500:C017 \
  gh_C018:gh_s13_r101:250:3000:500:C018 \
  gh_C019:gh_s13_r101:250:3000:500:C019 \
  gh_C020:gh_s13_r101:250:3000:500:C020 \
  gh_C021:gh_s13_r101:250:3000:500:C021 \
  gh_C022:gh_s13_r101:250:3000:500:C022 \
  gh_C023:gh_s13_r101:250:3000:500:C023 \
  gh_C024:gh_s13_r101:250:3000:500:C024 \
  gh_C025:gh_s13_r101:250:3000:500:C025 \
  gh_C026:gh_s13_r101:250:3000:500:C026 \
  gh_C027:gh_s13_r101:250:3000:500:C027 \
  gh_C028:gh_s13_r101:250:3000:500:C028 \
  gh_C029:gh_s13_r101:250:3000:500:C029 \
  gh_C030:gh_s13_r101:250:3000:500:C030 \
  gh_C031:gh_s13_r101:250:3000:500:C031 \
  gh_C032:gh_s13_r101:250:3000:500:C032 \
  gh_C033:gh_s13_r101:250:3000:500:C033 \
  gh_C034:gh_s13_r101:250:3000:500:C034 \
  gh_C035:gh_s13_r101:250:3000:500:C035 \
  gh_C036:gh_s13_r101:250:3000:500:C036 \
  gh_C037:gh_s13_r101:250:3000:500:C037 \
  gh_C038:gh_s13_r101:250:3000:500:C038 \
  gh_C039:gh_s13_r101:250:3000:500:C039 \
  gh_C040:gh_s13_r101:250:3000:500:C040 \
  gh_C041:gh_s13_r101:250:3000:500:C041 \
  gh_C042:gh_s13_r101:250:3000:500:C042 \
  gh_C043:gh_s13_r101:250:3000:500:C043 \
  gh_C044:gh_s13_r101:250:3000:500:C044 \
  gh_C045:gh_s13_r101:250:3000:500:C045 \
  gh_C046:gh_s13_r101:250:3000:500:C046 \
  gh_C047:gh_s13_r101:250:3000:500:C047 \
  gh_C048:gh_s13_r101:250:3000:500:C048 \
  gh_C049:gh_s13_r101:250:3000:500:C049 \
  gh_C050:gh_s13_r101:250:3000:500:C050 \
  gh_C051:gh_s13_r101:250:3000:500:C051 \
  gh_C052:gh_s13_r101:250:3000:500:C052 \
  gh_C053:gh_s13_r101:250:3000:500:C053 \
  gh_C054:gh_s13_r101:250:3000:500:C054 \
  gh_C055:gh_s13_r101:250:3000:500:C055 \
  gh_C056:gh_s13_r101:250:3000:500:C056 \
  gh_C057:gh_s13_r101:250:3000:500:C057 \
  gh_C058:gh_s13_r101:250:3000:500:C058 \
  gh_C059:gh_s13_r101:250:3000:500:C059 \
  gh_C060:gh_s13_r101:250:3000:500:C060 \
  gh_C061:gh_s13_r101:250:3000:500:C061 \
  gh_C062:gh_s13_r101:250:3000:500:C062 \
  gh_C063:gh_s13_r101:250:3000:500:C063 \
  gh_C064:gh_s13_r101:250:3000:500:C064 \
  gh_C065:gh_s13_r101:250:3000:500:C065 \
  gh_C066:gh_s13_r101:250:3000:500:C066 \
  gh_C067:gh_s13_r101:250:3000:500:C067 \
  gh_C068:gh_s13_r101:250:3000:500:C068 \
  gh_C069:gh_s13_r101:250:3000:500:C069 \
  gh_C070:gh_s13_r101:250:3000:500:C070 \
  gh_C071:gh_s13_r101:250:3000:500:C071 \
  gh_C072:gh_s13_r101:250:3000:500:C072 \
  gh_C073:gh_s13_r101:250:3000:500:C073 \
  gh_C074:gh_s13_r101:250:3000:500:C074 \
  gh_C075:gh_s13_r101:250:3000:500:C075 \
  gh_C076:gh_s13_r101:250:3000:500:C076 \
  gh_C077:gh_s13_r101:250:3000:500:C077 \
  gh_C078:gh_s13_r101:250:3000:500:C078 \
  gh_C079:gh_s13_r101:250:3000:500:C079 \
  gh_C080:gh_s13_r101:250:3000:500:C080 \
  gh_C081:gh_s13_r101:250:3000:500:C081 \
  gh_C082:gh_s13_r101:250:3000:500:C082 \
  gh_C083:gh_s13_r101:250:3000:500:C083 \
  gh_C084:gh_s13_r101:250:3000:500:C084 \
  gh_C085:gh_s13_r101:250:3000:500:C085 \
  gh_C086:gh_s13_r101:250:3000:500:C086 \
  gh_C087:gh_s13_r101:250:3000:500:C087 \
  gh_C088:gh_s13_r101:250:3000:500:C088 \
  gh_C089:gh_s13_r101:250:3000:500:C089 \
  gh_C090:gh_s13_r101:250:3000:500:C090 \
  gh_C091:gh_s13_r101:250:3000:500:C091 \
  gh_C092:gh_s13_r101:250:3000:500:C092 \
  gh_C093:gh_s13_r101:250:3000:500:C093 \
  gh_C094:gh_s13_r101:250:3000:500:C094 \
  gh_C095:gh_s13_r101:250:3000:500:C095 \
  gh_C096:gh_s13_r101:250:3000:500:C096 \
  gh_C097:gh_s13_r101:250:3000:500:C097 \
  gh_C098:gh_s13_r101:250:3000:500:C098 \
  gh_C099:gh_s13_r101:250:3000:500:C099 \
  gh_C100:gh_s13_r101:250:3000:500:C100 \
  gh_C101:gh_s13_r101:250:3000:500:C101 \
  gh_C102:gh_s13_r101:250:3000:500:C102 \
  gh_C103:gh_s13_r101:250:3000:500:C103 \
  gh_C104:gh_s13_r101:250:3000:500:C104 \
  gh_C105:gh_s13_r101:250:3000:500:C105 \
  gh_C106:gh_s13_r101:250:3000:500:C106 \
  gh_C107:gh_s13_r101:250:3000:500:C107 \
  gh_C108:gh_s13_r101:250:3000:500:C108 \
  gh_C109:gh_s13_r101:250:3000:500:C109 \
  gh_C110:gh_s13_r101:250:3000:500:C110 \
  gh_C111:gh_s13_r101:250:3000:500:C111 \
  gh_C112:gh_s13_r101:250:3000:500:C112 \
  gh_C113:gh_s13_r101:250:3000:500:C113 \
  gh_C114:gh_s13_r101:250:3000:500:C114 \
  gh_C115:gh_s13_r101:250:3000:500:C115 \
  gh_C116:gh_s13_r101:250:3000:500:C116 \
  gh_C117:gh_s13_r101:250:3000:500:C117 \
  gh_C118:gh_s13_r101:250:3000:500:C118 \
  gh_C119:gh_s13_r101:250:3000:500:C119 \
  gh_C120:gh_s13_r101:250:3000:500:C120 \
  gh_C121:gh_s13_r101:250:3000:500:C121 \
  gh_C122:gh_s13_r101:250:3000:500:C122 \
  gh_C123:gh_s13_r101:250:3000:500:C123 \
  gh_C124:gh_s13_r101:250:3000:500:C124 \
  gh_C125:gh_s13_r101:250:3000:500:C125 \
  gh_C126:gh_s13_r101:250:3000:500:C126 \
  gh_C127:gh_s13_r101:250:3000:500:C127 \
  gh_C128:gh_s13_r101:250:3000:500:C128

.PHONY:: do-all-tests do-single-test

# TESTS := ${FEW_CHANS_TESTS}
# TESTS := ${SINGLE_CHAN_TESTS_GH}
TESTS := ${SINGLE_CHAN_TESTS_FN}
# TESTS := ${MARKER_TESTS}

all: do-all-tests

do-all-tests:
	for tt in ${TESTS} ; do \
          ${MAKE} TEST=$$tt do-single-test ; \
        done

ifneq "/${TEST}" "/"
# ======================================================================
# Recursive section, client must define ${TEST}

TEST_ARGS := ${subst :, ,${TEST}}
TAG :=      ${word 1,${TEST_ARGS}}
IN_NAME :=  ${word 2,${TEST_ARGS}}
SKIP :=     ${word 3,${TEST_ARGS}}
NT :=       ${word 4,${TEST_ARGS}}
VMAX :=     ${word 5,${TEST_ARGS}}
CHANS :=    ${subst ., ,${word 6,${TEST_ARGS}}}

IPREF := data/${IN_NAME}
IFILE := ${IPREF}.txt

OPREF := out/test_${TAG}
OFILE := ${OPREF}.txt
OUT_PNG_FILE := ${OPREF}.png

ifeq "/${IN_NAME}" "/gh_s13_r101"
  MKSCALE := 0.5
  MKSHIFT := -370
  MKSTEP := -30
endif

ifeq "/${IN_NAME}" "/fn_v01_rall"
  MKSCALE := 10
  MKSHIFT := -100
  MKSTEP := -50
endif

do-single-test: ${PROGDIR}/${PROG}
	rm -fv ${OFILE}
	${PROGDIR}/${PROG} \
            -v skip=${SKIP} \
            -v take=${NT} \
            -v chans="${CHANS}" \
            -v mkscale=${MKSCALE} \
            -v mkshift=${MKSHIFT} \
            -v mkstep=${MKSTEP} \
          < ${IFILE} \
          > ${OFILE}
	nmeeg_plot_channels.sh \
          SHOW \
          ${OPREF} 0 \
          ${VMAX} \
          0 9999 \
          0 0 \
          1400 500

# ======================================================================
endif
